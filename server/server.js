const express = require('express');
const cors = require('cors');
const app = express();
const port = 5000;

// ใช้ cors โดยกำหนดให้เฉพาะโดเมนที่ต้องการเข้าถึง API ได้
const corsOptions = {
  origin: 'http://localhost:5173', // ระบุ URL ของฝั่ง Client ที่อนุญาตให้เข้าถึง API
  methods: 'GET,POST', // กำหนดวิธีการ HTTP ที่อนุญาต
  allowedHeaders: 'Content-Type', // กำหนดหัวข้อที่อนุญาต
};

app.use(cors(corsOptions)); // ใช้ CORS ตามที่กำหนด

// ข้อมูล JSON ที่เราจำลองจากฐานข้อมูล (ข้อมูลสำหรับกราฟ)
const data = {
  "departments": [
    "ครุศาสตร์วิศวกรรม",
    "ครุศาสตร์เกษตร",
    "ครุศาสตร์สถาปัตยกรรม",
    "ครุศาสตร์การออกแบบ",
    "ครุศาสตร์การออกแบบสภาพแวดล้อมภายใน"
  ],
  "fundTypes": [
    "เงินงบประมาณ",
    "เงินรายได้",
    "เงินสะสม",
    "เงินกันเหลื่อมปี"
  ],
  "years": ["2565", "2566", "2567", "2568"],
  "departmentDetails": {
    "ครุศาสตร์วิศวกรรม": {
      "เงินงบประมาณ": [
        { "year": "2565", "value": 650 },
        { "year": "2566", "value": 750 },
        { "year": "2567", "value": 980 },
        { "year": "2568", "value": 1200 }
      ],
      "เงินรายได้": [
        { "year": "2565", "value": 450 },
        { "year": "2566", "value": 480 },
        { "year": "2567", "value": 510 },
        { "year": "2568", "value": 540 }
      ],
      "เงินสะสม": [
        { "year": "2565", "value": 120 },
        { "year": "2566", "value": 130 },
        { "year": "2567", "value": 140 },
        { "year": "2568", "value": 150 }
      ],
      "เงินกันเหลื่อมปี": [
        { "year": "2565", "value": 100 },
        { "year": "2566", "value": 120 },
        { "year": "2567", "value": 140 },
        { "year": "2568", "value": 160 }
      ]
    },
    "ครุศาสตร์เกษตร": {
      "เงินงบประมาณ": [
        { "year": "2565", "value": 580 },
        { "year": "2566", "value": 770 },
        { "year": "2567", "value": 930 },
        { "year": "2568", "value": 1080 }
      ],
      "เงินรายได้": [
        { "year": "2565", "value": 420 },
        { "year": "2566", "value": 450 },
        { "year": "2567", "value": 490 },
        { "year": "2568", "value": 510 }
      ],
      "เงินสะสม": [
        { "year": "2565", "value": 110 },
        { "year": "2566", "value": 120 },
        { "year": "2567", "value": 130 },
        { "year": "2568", "value": 140 }
      ],
      "เงินกันเหลื่อมปี": [
        { "year": "2565", "value": 90 },
        { "year": "2566", "value": 100 },
        { "year": "2567", "value": 110 },
        { "year": "2568", "value": 120 }
      ]
    },
    "ครุศาสตร์สถาปัตยกรรม": {
      "เงินงบประมาณ": [
        { "year": "2565", "value": 600 },
        { "year": "2566", "value": 700 },
        { "year": "2567", "value": 850 },
        { "year": "2568", "value": 1000 }
      ],
      "เงินรายได้": [
        { "year": "2565", "value": 300 },
        { "year": "2566", "value": 320 },
        { "year": "2567", "value": 350 },
        { "year": "2568", "value": 380 }
      ],
      "เงินสะสม": [
        { "year": "2565", "value": 90 },
        { "year": "2566", "value": 100 },
        { "year": "2567", "value": 110 },
        { "year": "2568", "value": 120 }
      ],
      "เงินกันเหลื่อมปี": [
        { "year": "2565", "value": 80 },
        { "year": "2566", "value": 90 },
        { "year": "2567", "value": 100 },
        { "year": "2568", "value": 110 }
      ]
    },
    "ครุศาสตร์การออกแบบ": {
      "เงินงบประมาณ": [
        { "year": "2565", "value": 550 },
        { "year": "2566", "value": 650 },
        { "year": "2567", "value": 800 },
        { "year": "2568", "value": 950 }
      ],
      "เงินรายได้": [
        { "year": "2565", "value": 370 },
        { "year": "2566", "value": 390 },
        { "year": "2567", "value": 420 },
        { "year": "2568", "value": 450 }
      ],
      "เงินสะสม": [
        { "year": "2565", "value": 80 },
        { "year": "2566", "value": 90 },
        { "year": "2567", "value": 100 },
        { "year": "2568", "value": 110 }
      ],
      "เงินกันเหลื่อมปี": [
        { "year": "2565", "value": 70 },
        { "year": "2566", "value": 80 },
        { "year": "2567", "value": 90 },
        { "year": "2568", "value": 100 }
      ]
    },
    "ครุศาสตร์การออกแบบสภาพแวดล้อมภายใน": {
      "เงินงบประมาณ": [
        { "year": "2565", "value": 650 },
        { "year": "2566", "value": 750 },
        { "year": "2567", "value": 900 },
        { "year": "2568", "value": 1050 }
      ],
      "เงินรายได้": [
        { "year": "2565", "value": 400 },
        { "year": "2566", "value": 430 },
        { "year": "2567", "value": 460 },
        { "year": "2568", "value": 500 }
      ],
      "เงินสะสม": [
        { "year": "2565", "value": 100 },
        { "year": "2566", "value": 110 },
        { "year": "2567", "value": 120 },
        { "year": "2568", "value": 130 }
      ],
      "เงินกันเหลื่อมปี": [
        { "year": "2565", "value": 90 },
        { "year": "2566", "value": 100 },
        { "year": "2567", "value": 110 },
        { "year": "2568", "value": 120 }
      ]
    }
  },
  "assetStatuses": [
    "ใช้งาน", "ส่งซ่อม", "ชำรุด", "บริจาค/โอน", "รับโอน", "จำหน่าย"
  ],
  "departmentAssets": {
    "ครุศาสตร์วิศวกรรม": {
      "ใช้งาน": [
        { "year": "2565", "value": 100 },
        { "year": "2566", "value": 130 },
        { "year": "2567", "value": 160 },
        { "year": "2568", "value": 190 }
      ],
      "ส่งซ่อม": [
        { "year": "2565", "value": 30 },
        { "year": "2566", "value": 38 },
        { "year": "2567", "value": 44 },
        { "year": "2568", "value": 50 }
      ],
      "ชำรุด": [
        { "year": "2565", "value": 10 },
        { "year": "2566", "value": 12 },
        { "year": "2567", "value": 14 },
        { "year": "2568", "value": 16 }
      ],
      "บริจาค/โอน": [
        { "year": "2565", "value": 5 },
        { "year": "2566", "value": 6 },
        { "year": "2567", "value": 7 },
        { "year": "2568", "value": 8 }
      ],
      "รับโอน": [
        { "year": "2565", "value": 2 },
        { "year": "2566", "value": 3 },
        { "year": "2567", "value": 4 },
        { "year": "2568", "value": 5 }
      ],
      "จำหน่าย": [
        { "year": "2565", "value": 8 },
        { "year": "2566", "value": 10 },
        { "year": "2567", "value": 12 },
        { "year": "2568", "value": 14 }
      ]
    },
    "ครุศาสตร์เกษตร": {
      "ใช้งาน": [
        { "year": "2565", "value": 70 },
        { "year": "2566", "value": 80 },
        { "year": "2567", "value": 90 },
        { "year": "2568", "value": 110 }
      ],
      "ส่งซ่อม": [
        { "year": "2565", "value": 18 },
        { "year": "2566", "value": 22 },
        { "year": "2567", "value": 26 },
        { "year": "2568", "value": 30 }
      ],
      "ชำรุด": [
        { "year": "2565", "value": 5 },
        { "year": "2566", "value": 6 },
        { "year": "2567", "value": 7 },
        { "year": "2568", "value": 8 }
      ],
      "บริจาค/โอน": [
        { "year": "2565", "value": 3 },
        { "year": "2566", "value": 4 },
        { "year": "2567", "value": 5 },
        { "year": "2568", "value": 6 }
      ],
      "รับโอน": [
        { "year": "2565", "value": 1 },
        { "year": "2566", "value": 2 },
        { "year": "2567", "value": 3 },
        { "year": "2568", "value": 4 }
      ],
      "จำหน่าย": [
        { "year": "2565", "value": 7 },
        { "year": "2566", "value": 9 },
        { "year": "2567", "value": 10 },
        { "year": "2568", "value": 12 }
      ]
    },
    
  }
};

// API ที่ส่งข้อมูล mock
app.get('/api/getData', (req, res) => {
  res.json(data);
});

// เริ่มต้นเซิร์ฟเวอร์ที่พอร์ต 5000
app.listen(port, () => {
  console.log(`Server running on http://localhost:${port}`);
});
